<!-- Dewi Mooij  -->
<!-- 10752978 -->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
    <style>

    .axis path,
    .axis line {
        fill: none;
        stroke: black;
        shape-rendering: crispEdges;
    }

    .axis text {
        font-family: sans-serif;
        font-size: 11px;
    }

    .bar {
      fill: green;
    }

    .bar:hover {
      fill: lawngreen;
    }

    </style>

  </head>
  <body>
    <script type="text/javascript">
      d3.select("head").append("title").text("UFO");
      d3.select("body").append("p").text("Dewi Mooij");
      d3.select("body").append("p").text("10752978");
      d3.select("body").append("h1").text("Shapes of unidentified flying objects sighted in Great Britain in 2012");
      d3.select("body").append("p").text("This bar graph displays data of the shapes of unidentified flying objects (UFOs) sighted in the year 2012 in Great Britain.");
      d3.select("body").append("p").text("Please note that some records are sightings of the same UFO but the shape might be interpreted differently by different UFO spotters.");
      d3.select("body").append("p").text("The data has been filtered from https://www.kaggle.com/NUFORC/ufo-sightings/data")

      d3.json("ufogb.json", function(data) {

      var shapes = ["changing", "chevron", "cigar", "circle", "cone", "disk",
      "egg", "fireball", "flash", "formation", "light", "other", "oval",
      "rectangle", "sphere", "teardrop", "triangle", "unknown"];

      var sightings_shape = [];

      for (var shape = 0; shape < shapes.length; shape++){

        var counter = 0

          for (var sight = 0; sight < data.length; sight++)
          {
            if (data[sight].shape == shapes[shape]){
                  counter += 1
            }
          }
        sightings_shape.push(counter);
      }

      // set padding between bars, width and height
      var barPadding = 1;
      var margin = {top: 10, right: 20, bottom: 50, left: 50};
      var fullwidth = 500;
      var fullheight = 300;
      var width = fullwidth - margin.left - margin.right;
      var height = fullheight - margin.top - margin.bottom;

      // Create SVG element
      var svg = d3.select("body")
        .append("svg")
         .attr("width", fullwidth)
         .attr("height", fullheight)
        .append("g")
         .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

     // var xscale = d3.scale.ordinal()
     //   .domain(sightings_shape)
     //   .rangeRoundBands([margin.left, width]);

    var xscale = d3.scale.linear()
      .domain(sightings_shape)
      .range([width, 0]);

     var yscale = d3.scale.linear()
       .domain([0, 16])
       .range([height, margin.top]);

      // create bars
      svg.selectAll("rect")
        .data(sightings_shape)
        .enter()
        .append("rect")
        .attr("class", "bar")
        .attr("x", function (d, i){
          return (i * width / sightings_shape.length);
        })
        .attr("y", function (d){
          return yscale(d);
        })
        .attr("width", width / sightings_shape.length - barPadding)
        .attr("height", function (d){
          return height - yscale(d);
        })



      // add text to bar chart
      // svg.selectAll("text")
      //   .data(sightings_shape)
      //   .enter()
      //   .append("text")
      //   .text(function(d) {
      //        return d;
      //   })
      //   .attr("x", function (d, i){
      //     return i * (width / sightings_shape.length) + 5;
      //   })
      //   .attr("y", function (d){
      //     return height - (d * 10);
      //   });

    // var xscale = d3.scale.ordinal()
    //   .domain([0, sightings_shape])
    //   .rangeRoundBands([margin.left, width + margin.left]);
      // .domain([0, sightings_shape.length])
      // .range([margin.left, width + margin.left])

      // create axes
      var xaxis = d3.svg.axis()
          .scale(xscale)
          .orient("bottom")

      var yaxis = d3.svg.axis()
                        .scale(yscale)
                        .orient("left")
                        .ticks(8);

      svg.append("g")
           .attr("class", "axis")
           .call(xaxis);

     svg.append("g")
          .attr("class", "axis")
          .call(yaxis)
        .append("text")
          .text("Sightings")
          .style("text-anchor", "end");

         // .append("text")
         //  .data(sightings_shape)
         //
         //
         //  .text("Shape")
         //
         // .selectAll("text")
         //   .data(sightings_shape)
         //   .attr("transform", "rotate(-90)")
         //   .style("text-anchor", "end");

      // svg.append("g")
      //      .attr("class", "axis")
      //      .call(yaxis)
      //     .append("text")
      //       .attr("transform", "rotate(-90)")
      //       .style("text-anchor", "end")
      //       .text("Sightings");

    });

    </script>
  </body>
</html>
